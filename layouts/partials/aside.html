<nav>
  <ul>
    {{- range .Site.Sections -}}
      {{- template "nav-section" . -}}
    {{- end -}}
  </ul>
</nav>

{{- define "nav-section" -}}
  <li>
    {{ .Title }}
    {{- if gt (.Page.Pages | len) 0 -}}
      <ul>
        {{- range .Page.Pages -}}
          {{- template "nav-section" . -}}
        {{- end -}}
      </ul>
    {{- end -}}
  </li>
{{- end -}}
